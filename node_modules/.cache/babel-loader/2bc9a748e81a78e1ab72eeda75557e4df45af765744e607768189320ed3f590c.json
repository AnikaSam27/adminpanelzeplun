{"ast":null,"code":"/* eslint-disable no-unused-vars */import React,{useEffect,useState}from\"react\";import{BrowserRouter as Router,Routes,Route,Navigate}from\"react-router-dom\";import Navbar from\"./components/Navbar\";import Dashboard from\"./pages/Dashboard\";import PendingPartners from\"./pages/PendingPartners\";import ApprovedPartners from\"./pages/ApprovedPartners\";import SlotManager from\"./pages/SlotManager\";import RateCardManager from\"./pages/RateCardManager\";import PartnerEarnings from\"./pages/PartnerEarnings\";import Login from\"./pages/Login\";import AutoLogout from\"./components/AutoLogout\";import{signOut}from\"firebase/auth\";import{auth}from\"./firebase\";// â­ Import the global notification listener\nimport{startOrderNotificationListener}from\"./utils/OrderNotifier\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);// ðŸ”¹ Track login state\nuseEffect(()=>{const unsubscribe=auth.onAuthStateChanged(currentUser=>{setUser(currentUser);setLoading(false);});return unsubscribe;},[]);// ðŸ”¥ Logout when tab/browser is closed\nuseEffect(()=>{const handleTabClose=()=>{auth.signOut();};window.addEventListener(\"beforeunload\",handleTabClose);return()=>window.removeEventListener(\"beforeunload\",handleTabClose);},[]);// ðŸ”¥ GLOBAL ORDER LISTENER (runs once when logged in)\nuseEffect(()=>{if(user){console.log(\"ðŸ”„ Starting order notification listener...\");startOrderNotificationListener();}},[user]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(AutoLogout,{}),user&&/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/\"}):/*#__PURE__*/_jsx(Login,{})}),user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/pending-partners\",element:/*#__PURE__*/_jsx(PendingPartners,{})}),/*#__PURE__*/_jsx(Route,{path:\"/approved-partners\",element:/*#__PURE__*/_jsx(ApprovedPartners,{})}),/*#__PURE__*/_jsx(Route,{path:\"/slots\",element:/*#__PURE__*/_jsx(SlotManager,{})}),/*#__PURE__*/_jsx(Route,{path:\"/rate-card\",element:/*#__PURE__*/_jsx(RateCardManager,{})}),/*#__PURE__*/_jsx(Route,{path:\"/partner-earnings\",element:/*#__PURE__*/_jsx(PartnerEarnings,{})})]}):/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]})})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","BrowserRouter","Router","Routes","Route","Navigate","Navbar","Dashboard","PendingPartners","ApprovedPartners","SlotManager","RateCardManager","PartnerEarnings","Login","AutoLogout","signOut","auth","startOrderNotificationListener","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","user","setUser","loading","setLoading","unsubscribe","onAuthStateChanged","currentUser","handleTabClose","window","addEventListener","removeEventListener","console","log","children","className","path","element","to","replace"],"sources":["C:/Users/anika/admin-panel/src/App.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport React, { useEffect, useState } from \"react\";\nimport { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport Navbar from \"./components/Navbar\";\nimport Dashboard from \"./pages/Dashboard\";\nimport PendingPartners from \"./pages/PendingPartners\";\nimport ApprovedPartners from \"./pages/ApprovedPartners\";\nimport SlotManager from \"./pages/SlotManager\";\nimport RateCardManager from \"./pages/RateCardManager\";\nimport PartnerEarnings from \"./pages/PartnerEarnings\";\nimport Login from \"./pages/Login\";\nimport AutoLogout from \"./components/AutoLogout\";\nimport { signOut } from \"firebase/auth\";\nimport { auth } from \"./firebase\";\n\n// â­ Import the global notification listener\nimport { startOrderNotificationListener } from \"./utils/OrderNotifier\";\n\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // ðŸ”¹ Track login state\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged((currentUser) => {\n      \n      setUser(currentUser);\n      setLoading(false);\n    });\n    return unsubscribe;\n  }, []);\n    // ðŸ”¥ Logout when tab/browser is closed\n  useEffect(() => {\n    const handleTabClose = () => {\n      auth.signOut();\n    };\n\n    window.addEventListener(\"beforeunload\", handleTabClose);\n    return () => window.removeEventListener(\"beforeunload\", handleTabClose);\n  }, []);\n\n\n  // ðŸ”¥ GLOBAL ORDER LISTENER (runs once when logged in)\n  useEffect(() => {\n    if (user) {\n      console.log(\"ðŸ”„ Starting order notification listener...\");\n      startOrderNotificationListener();\n    }\n  }, [user]);\n\n  if (loading) return <p>Loading...</p>;\n\n  return (\n    <Router>\n      <div className=\"App\">\n        {/* ðŸ”¥ Auto logout timer runs globally */}\n        <AutoLogout />\n        {/* Show navbar only if logged in */}\n        {user && <Navbar />}\n\n        <div className=\"content\">\n          <Routes>\n            {/* Login route */}\n            <Route path=\"/login\" element={user ? <Navigate to=\"/\" /> : <Login />} />\n\n            {/* Protected routes */}\n            {user ? (\n              <>\n                <Route path=\"/\" element={<Dashboard />} />\n                <Route path=\"/dashboard\" element={<Dashboard />} />\n                <Route path=\"/pending-partners\" element={<PendingPartners />} />\n                <Route path=\"/approved-partners\" element={<ApprovedPartners />} />\n                <Route path=\"/slots\" element={<SlotManager />} />\n                <Route path=\"/rate-card\" element={<RateCardManager />} />\n                <Route path=\"/partner-earnings\" element={<PartnerEarnings />} />\n              </>\n            ) : (\n              <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n            )}\n          </Routes>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}