{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anika\\\\admin-panel\\\\src\\\\pages\\\\PartnerEarnings.js\",\n  _s = $RefreshSig$();\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from \"react\";\nimport { collection, getDocs, updateDoc, doc, query, where } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PartnerEarnings = () => {\n  _s();\n  const [partners, setPartners] = useState([]);\n  const [selectedPartner, setSelectedPartner] = useState(\"\");\n  const [orders, setOrders] = useState([]);\n  const [estimates, setEstimates] = useState([]);\n  const [earnings, setEarnings] = useState({});\n  const [loading, setLoading] = useState(false);\n\n  // ðŸ”¹ Load partners\n  useEffect(() => {\n    const loadPartners = async () => {\n      const snap = await getDocs(collection(db, \"partners\"));\n      const partnerList = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      const approved = partnerList.filter(p => p.approved === true);\n      setPartners(approved);\n    };\n    loadPartners();\n  }, []);\n\n  // ðŸ”¹ Fetch partner's completed or closed orders + estimates\n  useEffect(() => {\n    const fetchData = async () => {\n      if (!selectedPartner) return;\n      setLoading(true);\n      try {\n        // âœ… Fetch orders where partnerId matches\n        const ordersRef = collection(db, \"orders\");\n        const q = query(ordersRef, where(\"partnerId\", \"==\", selectedPartner));\n        const snap = await getDocs(q);\n        const allOrders = snap.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n\n        // âœ… Filter only completed or closed\n        const completedOrders = allOrders.filter(order => {\n          var _order$status;\n          const s = ((_order$status = order.status) === null || _order$status === void 0 ? void 0 : _order$status.toLowerCase()) || \"\";\n          return s === \"completed\" || s === \"closed\";\n        });\n\n        // âœ… Fetch approved estimates for this partner\n        const estRef = collection(db, \"estimates\");\n        const estSnap = await getDocs(query(estRef, where(\"partnerId\", \"==\", selectedPartner)));\n        const estList = estSnap.docs.map(d => ({\n          id: d.id,\n          ...d.data()\n        })).filter(e => {\n          var _e$status;\n          return ((_e$status = e.status) === null || _e$status === void 0 ? void 0 : _e$status.toLowerCase()) === \"approved\";\n        });\n        setOrders(completedOrders);\n        setEstimates(estList);\n      } catch (err) {\n        console.error(\"Error loading data:\", err);\n      }\n      setLoading(false);\n    };\n    fetchData();\n  }, [selectedPartner]);\n\n  // ðŸ”¹ Handle earning input change\n  const handleEarningChange = (orderId, value) => {\n    setEarnings(prev => ({\n      ...prev,\n      [orderId]: value\n    }));\n  };\n\n  // ðŸ”¹ Process payout (save to Firestore)\n  const handleProcessPayout = async order => {\n    const earningAmount = parseFloat(earnings[order.orderId] || 0);\n    if (isNaN(earningAmount) || earningAmount <= 0) {\n      Swal.fire(\"âš ï¸ Enter a valid amount before processing.\", \"\", \"warning\");\n      return;\n    }\n    try {\n      const partnerRef = doc(db, \"partners\", order.partnerId);\n      const payoutsRef = collection(partnerRef, \"payouts\");\n\n      // âœ… Add/Update payout record inside subcollection\n      await updateDoc(partnerRef, {\n        lastPayoutAmount: earningAmount,\n        lastPayoutDate: new Date()\n      });\n      await updateDoc(doc(db, \"orders\", order.id), {\n        partnerEarning: earningAmount\n      });\n      Swal.fire(\"âœ… Payout saved successfully!\", \"\", \"success\");\n    } catch (error) {\n      console.error(\"Error processing payout:\", error);\n      Swal.fire(\"âŒ Error\", \"Failed to save payout\", \"error\");\n    }\n  };\n\n  // ðŸ”¹ Helper: find estimates linked to orderId\n  const getEstimatesForOrder = orderId => {\n    return estimates.filter(est => est.orderId === orderId);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"Partner Earnings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"font-semibold mr-2\",\n        children: \"Select Partner:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedPartner,\n        onChange: e => setSelectedPartner(e.target.value),\n        className: \"border p-2 rounded\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Choose Partner --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), partners.map(partner => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: partner.id,\n          children: [partner.name, \" (\", partner.phone, \")\"]\n        }, partner.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }, this) : !selectedPartner ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Please select a partner to view their earnings.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this) : orders.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No completed or closed orders found for this partner.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-x-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"min-w-full border-collapse border border-gray-300 text-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"bg-gray-100\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border p-2\",\n              children: \"Order ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border p-2\",\n              children: \"Customer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border p-2\",\n              children: \"Services + Estimates\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border p-2\",\n              children: \"Total Amount (\\u20B9)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border p-2\",\n              children: \"Earning (\\u20B9)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"border p-2\",\n              children: \"Action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: orders.map(order => {\n            var _order$items;\n            const relatedEstimates = getEstimatesForOrder(order.orderId);\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border p-2\",\n                children: order.orderId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border p-2\",\n                children: order.customerName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border p-2\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"list-disc ml-4\",\n                  children: [(_order$items = order.items) === null || _order$items === void 0 ? void 0 : _order$items.map((item, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [item.name, \" \\u2013 \\u20B9\", item.price]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 27\n                  }, this)), relatedEstimates.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Approved Estimates:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 171,\n                      columnNumber: 29\n                    }, this), relatedEstimates.map((est, eidx) => {\n                      var _est$services;\n                      return (_est$services = est.services) === null || _est$services === void 0 ? void 0 : _est$services.map((srv, sidx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                        children: [srv.subCategory, \" (\", srv.description, \") \\u2013 \\u20B9\", srv.totalAmount || srv.labour_charge + srv.service_charge]\n                      }, `${eidx}-${sidx}`, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 174,\n                        columnNumber: 33\n                      }, this));\n                    })]\n                  }, void 0, true)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border p-2\",\n                children: [\"\\u20B9\", order.totalAmount || 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border p-2\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: earnings[order.orderId] || \"\",\n                  onChange: e => handleEarningChange(order.orderId, e.target.value),\n                  placeholder: \"Enter amount\",\n                  className: \"border p-1 rounded w-28\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border p-2\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleProcessPayout(order),\n                  className: \"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded\",\n                  children: \"Process\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 21\n              }, this)]\n            }, order.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n};\n_s(PartnerEarnings, \"TBcWkLknLTiBeDUGcESN0GUB/BU=\");\n_c = PartnerEarnings;\nexport default PartnerEarnings;\nvar _c;\n$RefreshReg$(_c, \"PartnerEarnings\");","map":{"version":3,"names":["React","useEffect","useState","collection","getDocs","updateDoc","doc","query","where","db","Swal","jsxDEV","_jsxDEV","Fragment","_Fragment","PartnerEarnings","_s","partners","setPartners","selectedPartner","setSelectedPartner","orders","setOrders","estimates","setEstimates","earnings","setEarnings","loading","setLoading","loadPartners","snap","partnerList","docs","map","d","id","data","approved","filter","p","fetchData","ordersRef","q","allOrders","completedOrders","order","_order$status","s","status","toLowerCase","estRef","estSnap","estList","e","_e$status","err","console","error","handleEarningChange","orderId","value","prev","handleProcessPayout","earningAmount","parseFloat","isNaN","fire","partnerRef","partnerId","payoutsRef","lastPayoutAmount","lastPayoutDate","Date","partnerEarning","getEstimatesForOrder","est","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","target","partner","name","phone","length","_order$items","relatedEstimates","customerName","items","item","idx","price","eidx","_est$services","services","srv","sidx","subCategory","description","totalAmount","labour_charge","service_charge","type","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/Users/anika/admin-panel/src/pages/PartnerEarnings.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useEffect, useState } from \"react\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  updateDoc,\r\n  doc,\r\n  query,\r\n  where,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst PartnerEarnings = () => {\r\n  const [partners, setPartners] = useState([]);\r\n  const [selectedPartner, setSelectedPartner] = useState(\"\");\r\n  const [orders, setOrders] = useState([]);\r\n  const [estimates, setEstimates] = useState([]);\r\n  const [earnings, setEarnings] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // ðŸ”¹ Load partners\r\n  useEffect(() => {\r\n    const loadPartners = async () => {\r\n      const snap = await getDocs(collection(db, \"partners\"));\r\n      const partnerList = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n      const approved = partnerList.filter((p) => p.approved === true);\r\n      setPartners(approved);\r\n    };\r\n    loadPartners();\r\n  }, []);\r\n\r\n  // ðŸ”¹ Fetch partner's completed or closed orders + estimates\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (!selectedPartner) return;\r\n      setLoading(true);\r\n\r\n      try {\r\n        // âœ… Fetch orders where partnerId matches\r\n        const ordersRef = collection(db, \"orders\");\r\n        const q = query(ordersRef, where(\"partnerId\", \"==\", selectedPartner));\r\n        const snap = await getDocs(q);\r\n        const allOrders = snap.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n\r\n        // âœ… Filter only completed or closed\r\n        const completedOrders = allOrders.filter((order) => {\r\n          const s = order.status?.toLowerCase() || \"\";\r\n          return s === \"completed\" || s === \"closed\";\r\n        });\r\n\r\n        // âœ… Fetch approved estimates for this partner\r\n        const estRef = collection(db, \"estimates\");\r\n        const estSnap = await getDocs(\r\n          query(estRef, where(\"partnerId\", \"==\", selectedPartner))\r\n        );\r\n        const estList = estSnap.docs\r\n          .map((d) => ({ id: d.id, ...d.data() }))\r\n          .filter((e) => e.status?.toLowerCase() === \"approved\");\r\n\r\n        setOrders(completedOrders);\r\n        setEstimates(estList);\r\n      } catch (err) {\r\n        console.error(\"Error loading data:\", err);\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchData();\r\n  }, [selectedPartner]);\r\n\r\n  // ðŸ”¹ Handle earning input change\r\n  const handleEarningChange = (orderId, value) => {\r\n    setEarnings((prev) => ({ ...prev, [orderId]: value }));\r\n  };\r\n\r\n  // ðŸ”¹ Process payout (save to Firestore)\r\n  const handleProcessPayout = async (order) => {\r\n    const earningAmount = parseFloat(earnings[order.orderId] || 0);\r\n    if (isNaN(earningAmount) || earningAmount <= 0) {\r\n      Swal.fire(\"âš ï¸ Enter a valid amount before processing.\", \"\", \"warning\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const partnerRef = doc(db, \"partners\", order.partnerId);\r\n      const payoutsRef = collection(partnerRef, \"payouts\");\r\n\r\n      // âœ… Add/Update payout record inside subcollection\r\n      await updateDoc(partnerRef, {\r\n        lastPayoutAmount: earningAmount,\r\n        lastPayoutDate: new Date(),\r\n      });\r\n\r\n      await updateDoc(doc(db, \"orders\", order.id), {\r\n        partnerEarning: earningAmount,\r\n      });\r\n\r\n      Swal.fire(\"âœ… Payout saved successfully!\", \"\", \"success\");\r\n    } catch (error) {\r\n      console.error(\"Error processing payout:\", error);\r\n      Swal.fire(\"âŒ Error\", \"Failed to save payout\", \"error\");\r\n    }\r\n  };\r\n\r\n  // ðŸ”¹ Helper: find estimates linked to orderId\r\n  const getEstimatesForOrder = (orderId) => {\r\n    return estimates.filter((est) => est.orderId === orderId);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Partner Earnings</h2>\r\n\r\n      {/* Partner Selector */}\r\n      <div className=\"mb-6\">\r\n        <label className=\"font-semibold mr-2\">Select Partner:</label>\r\n        <select\r\n          value={selectedPartner}\r\n          onChange={(e) => setSelectedPartner(e.target.value)}\r\n          className=\"border p-2 rounded\"\r\n        >\r\n          <option value=\"\">-- Choose Partner --</option>\r\n          {partners.map((partner) => (\r\n            <option key={partner.id} value={partner.id}>\r\n              {partner.name} ({partner.phone})\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <p>Loading data...</p>\r\n      ) : !selectedPartner ? (\r\n        <p>Please select a partner to view their earnings.</p>\r\n      ) : orders.length === 0 ? (\r\n        <p>No completed or closed orders found for this partner.</p>\r\n      ) : (\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full border-collapse border border-gray-300 text-left\">\r\n            <thead className=\"bg-gray-100\">\r\n              <tr>\r\n                <th className=\"border p-2\">Order ID</th>\r\n                <th className=\"border p-2\">Customer</th>\r\n                <th className=\"border p-2\">Services + Estimates</th>\r\n                <th className=\"border p-2\">Total Amount (â‚¹)</th>\r\n                <th className=\"border p-2\">Earning (â‚¹)</th>\r\n                <th className=\"border p-2\">Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {orders.map((order) => {\r\n                const relatedEstimates = getEstimatesForOrder(order.orderId);\r\n                return (\r\n                  <tr key={order.id}>\r\n                    <td className=\"border p-2\">{order.orderId}</td>\r\n                    <td className=\"border p-2\">{order.customerName}</td>\r\n                    <td className=\"border p-2\">\r\n                      <ul className=\"list-disc ml-4\">\r\n                        {order.items?.map((item, idx) => (\r\n                          <li key={idx}>\r\n                            {item.name} â€“ â‚¹{item.price}\r\n                          </li>\r\n                        ))}\r\n                        {relatedEstimates.length > 0 && (\r\n                          <>\r\n                            <strong>Approved Estimates:</strong>\r\n                            {relatedEstimates.map((est, eidx) =>\r\n                              est.services?.map((srv, sidx) => (\r\n                                <li key={`${eidx}-${sidx}`}>\r\n                                  {srv.subCategory} ({srv.description}) â€“ â‚¹\r\n                                  {srv.totalAmount || srv.labour_charge + srv.service_charge}\r\n                                </li>\r\n                              ))\r\n                            )}\r\n                          </>\r\n                        )}\r\n                      </ul>\r\n                    </td>\r\n                    <td className=\"border p-2\">â‚¹{order.totalAmount || 0}</td>\r\n                    <td className=\"border p-2\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={earnings[order.orderId] || \"\"}\r\n                        onChange={(e) =>\r\n                          handleEarningChange(order.orderId, e.target.value)\r\n                        }\r\n                        placeholder=\"Enter amount\"\r\n                        className=\"border p-1 rounded w-28\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"border p-2\">\r\n                      <button\r\n                        onClick={() => handleProcessPayout(order)}\r\n                        className=\"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded\"\r\n                      >\r\n                        Process\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PartnerEarnings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}