{"ast":null,"code":"import _objectSpread from\"C:/Users/anika/admin-panel/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{collection,getDocs,query,where,updateDoc,doc,deleteDoc}from\"firebase/firestore\";import{db}from\"../firebase\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PendingPartners=()=>{const[partners,setPartners]=useState([]);const[loading,setLoading]=useState(true);const fetchPartners=async()=>{setLoading(true);try{const q=query(collection(db,\"partners\"),where(\"approved\",\"==\",false),where(\"kycSubmitted\",\"==\",true),where(\"kycVerified\",\"==\",false));const snapshot=await getDocs(q);const partnerList=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setPartners(partnerList);}catch(error){console.error(\"Error fetching partners:\",error);}setLoading(false);};useEffect(()=>{fetchPartners();},[]);const approvePartner=async id=>{try{await updateDoc(doc(db,\"partners\",id),{approved:true,kycVerified:true});setPartners(prev=>prev.filter(p=>p.id!==id));alert(\"Partner approved successfully!\");}catch(error){console.error(error);alert(\"Error approving partner\");}};const rejectAndDeletePartner=async id=>{if(!window.confirm(\"Are you sure you want to reject and delete this partner?\"))return;try{// Optional: mark as rejected before deleting\n// await updateDoc(doc(db, \"partners\", id), { rejected: true });\nawait deleteDoc(doc(db,\"partners\",id));setPartners(prev=>prev.filter(p=>p.id!==id));alert(\"Partner rejected and deleted successfully!\");}catch(error){console.error(error);alert(\"Error rejecting & deleting partner\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Pending Partners (KYC not approved)\"}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),!loading&&partners.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No pending partners\"}),!loading&&partners.length>0&&/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Categories\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:partners.map(p=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.name}),/*#__PURE__*/_jsx(\"td\",{children:p.email}),/*#__PURE__*/_jsx(\"td\",{children:p.phone}),/*#__PURE__*/_jsx(\"td\",{children:p.categories&&p.categories.length>0?p.categories.join(\", \"):\"No categories\"}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>approvePartner(p.id),style:{marginRight:\"5px\",background:\"#4CAF50\",color:\"#fff\"},children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>rejectAndDeletePartner(p.id),style:{background:\"#e74c3c\",color:\"#fff\"},children:\"Reject & Delete\"})]})]},p.id))})]})]});};export default PendingPartners;","map":{"version":3,"names":["React","useEffect","useState","collection","getDocs","query","where","updateDoc","doc","deleteDoc","db","jsx","_jsx","jsxs","_jsxs","PendingPartners","partners","setPartners","loading","setLoading","fetchPartners","q","snapshot","partnerList","docs","map","_objectSpread","id","data","error","console","approvePartner","approved","kycVerified","prev","filter","p","alert","rejectAndDeletePartner","window","confirm","className","children","length","name","email","phone","categories","join","onClick","style","marginRight","background","color"],"sources":["C:/Users/anika/admin-panel/src/pages/PendingPartners.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { collection, getDocs, query, where, updateDoc, doc, deleteDoc } from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\n\r\nconst PendingPartners = () => {\r\n  const [partners, setPartners] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchPartners = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const q = query(collection(db, \"partners\"), where(\"approved\", \"==\", false), where(\"kycSubmitted\", \"==\", true),\r\n  where(\"kycVerified\", \"==\", false));\r\n      const snapshot = await getDocs(q);\r\n      const partnerList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setPartners(partnerList);\r\n    } catch (error) {\r\n      console.error(\"Error fetching partners:\", error);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPartners();\r\n  }, []);\r\n\r\n  const approvePartner = async (id) => {\r\n    try {\r\n      await updateDoc(doc(db, \"partners\", id), { approved: true, kycVerified: true });\r\n      setPartners(prev => prev.filter(p => p.id !== id));\r\n      alert(\"Partner approved successfully!\");\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert(\"Error approving partner\");\r\n    }\r\n  };\r\n\r\n  const rejectAndDeletePartner = async (id) => {\r\n    if (!window.confirm(\"Are you sure you want to reject and delete this partner?\")) return;\r\n    try {\r\n      // Optional: mark as rejected before deleting\r\n      // await updateDoc(doc(db, \"partners\", id), { rejected: true });\r\n      \r\n      await deleteDoc(doc(db, \"partners\", id));\r\n      setPartners(prev => prev.filter(p => p.id !== id));\r\n      alert(\"Partner rejected and deleted successfully!\");\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert(\"Error rejecting & deleting partner\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page-container\">\r\n      <h2>Pending Partners (KYC not approved)</h2>\r\n\r\n      {loading && <p>Loading...</p>}\r\n\r\n      {!loading && partners.length === 0 && <p>No pending partners</p>}\r\n\r\n      {!loading && partners.length > 0 && (\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Email</th>\r\n              <th>Phone</th>\r\n              <th>Categories</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {partners.map(p => (\r\n              <tr key={p.id}>\r\n                <td>{p.name}</td>\r\n                <td>{p.email}</td>\r\n                <td>{p.phone}</td>\r\n                <td>{p.categories && p.categories.length > 0 ? p.categories.join(\", \") : \"No categories\"}</td>\r\n                <td>\r\n                  <button \r\n                    onClick={() => approvePartner(p.id)} \r\n                    style={{ marginRight: \"5px\", background: \"#4CAF50\", color: \"#fff\" }}\r\n                  >\r\n                    Approve\r\n                  </button>\r\n                  <button \r\n                    onClick={() => rejectAndDeletePartner(p.id)} \r\n                    style={{ background: \"#e74c3c\", color: \"#fff\" }}\r\n                  >\r\n                    Reject & Delete\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PendingPartners;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}